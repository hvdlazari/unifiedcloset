YUI.add("moodle-atto_unifiedcloset-button",function(e,t){var n="atto_unifiedcloset",r="atto_unifiedcloset",i={MASTER:"block_unifiedcloset_master",GRID:"block_unifiedcloset_grid",GRID_TABLE:"block_unifiedcloset_grid_title",GRID_DIV_TABLE:"block_unifiedcloset_grid_div_table",DIV_TABLE:"table-responsive",TABLE:"table"},s={MASTER:'<form class="atto_form"><div class="{{CSS.MASTER}}"><div class="{{CSS.GRID}}"><div class="{{CSS.GRID_TABLE}}"><a href=""><h3>{{get_string "h3" component}}</h3></a></div><div class="{{CSS.GRID_DIV_TABLE}}"><div class="{{CSS.DIV_TABLE}}"><table id="block_unifiedcloset_grid_table" class="{{CSS.TABLE}}"><thead><th>{{get_string "th:thumbnail" component}}</th><th>{{get_string "th:title" component}}</th><th>{{get_string "th:file_link" component}}</th><th>{{get_string "th:type" component}}</th><th>{{get_string "th:date_created" component}}</th><th>{{get_string "th:edit_reg" component}}</th><th>{{get_string "th:exclude_logical" component}}</th><th>{{get_string "th:download" component}}</th><th>{{get_string "th:licence" component}}</th></thead></table></div></div></div></div></form>'};e.namespace("M.atto_unifiedcloset").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{_currentSelection:null,_content:null,initializer:function(){this.addButton({iconurl:M.cfg.wwwroot+"/lib/editor/atto/plugins/unifiedcloset/pix/icon.svg",callback:this._displayDialogue})},_displayDialogue:function(t){if(this.get("host").getSelection()===!1)return;"renderPartial"in e.Handlebars.helpers||(function i(t,n){e.each(n,function(n,r){t.push(r),typeof n!="object"?e.Handlebars.registerPartial(t.join(".").toLowerCase(),n):i(t,n),t.pop()})}([],s),e.Handlebars.registerHelper("renderPartial",function(t,n){if(!t)return"";var r=e.Handlebars.partials[t],i=n.hash.context?e.clone(n.hash.context):{},s=e.merge(i,n.hash);return delete s.context,r?new e.Handlebars.SafeString(e.Handlebars.compile(r)(s)):""}));var n=this.getDialogue({headerContent:M.util.get_string("pluginname",r),width:"1150px",focusAfterHide:!0});n.set("bodyContent",this._getDialogueContent()).show()},_getDialogueContent:function(){return this._content=e.Node.create(e.Handlebars.compile(s.MASTER)(this._getContext())),this._content},_getContext:function(t){return e.merge({elementid:this.get("host").get("elementid"),username:this.get("username"),dirid:this.get("dirid"),component:r,CSS:i},t)},_getIframeURL:function(){return M.cfg.wwwroot+"/lib/editor/atto/plugins/unifiedcloset/unifiedcloset.php?dirid="+this.get("dirid")+"&username="+this.get("username")}},{ATTRS:{dirid:{value:0},username:{value:null}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});
